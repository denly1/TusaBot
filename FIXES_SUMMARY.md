# –°–≤–æ–¥–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π TusaBot

## ‚úÖ **–ß—Ç–æ —É—Å–ø–µ—à–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**

### 1. **VK –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞**
- **VK —Ç–æ–∫–µ–Ω**: –¥–æ–±–∞–≤–ª–µ–Ω –≤ .env
- **ID –≥—Ä—É–ø–ø—ã**: 232772029 (https://vk.com/club232772029)
- **API –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ**: VK API –æ—Ç–≤–µ—á–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### 2. **–õ–æ–≥–∏–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –∏–∑ –ë–î –Ω–µ –±—ã–ª–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- **–†–µ—à–µ–Ω–∏–µ**: –§—É–Ω–∫—Ü–∏—è `load_user_data_from_db()` —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç `registered = False`

### 3. **VK —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω**
- **–ü—Ä–∏–≤—è–∑–∫–∞ –ø–æ VK ID**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —á–µ—Ä–µ–∑ VK API
- **–£–º–Ω—ã–µ –∫–Ω–æ–ø–∫–∏**: –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

### 4. –ö–Ω–æ–ø–∫–∏ –±–æ—Ç–∞ - –ò–°–ü–†–ê–í–õ–ï–ù–û ‚úÖ
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ö–Ω–æ–ø–∫–∏ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏" –∏ "–ü—Ä–∏–≤—è–∑–∞—Ç—å VK –ø—Ä–æ—Ñ–∏–ª—å" –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏
- **–ü—Ä–∏—á–∏–Ω–∞**: –§—É–Ω–∫—Ü–∏—è `handle_buttons` –±—ã–ª–∞ —Å–ª–æ–º–∞–Ω–∞ –∏–∑-–∑–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞ –∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: 
  - –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–ª —Ñ—É–Ω–∫—Ü–∏—é `handle_buttons` —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π try/except
  - –£–¥–∞–ª–∏–ª –≤–µ—Å—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥
  - –£–±—Ä–∞–ª –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –∫–Ω–æ–ø–æ–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π –¥–ª—è "check_all" –∏ "link_vk"

### 5. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π - –ò–°–ü–†–ê–í–õ–ï–ù–û ‚úÖ
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª–æ—Å—å –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- **–ü—Ä–∏—á–∏–Ω–∞**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ —Ç–æ–ª—å–∫–æ –Ω–∞ —ç—Ç–∞–ø–µ –≤–≤–æ–¥–∞ –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –î–æ–±–∞–≤–∏–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–º–µ–Ω–∏ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –≤–≤–æ–¥–∞ –Ω–∞ —ç—Ç–∞–ø–µ "name" —á–µ—Ä–µ–∑ `upsert_user()`

### 6. –í–∞–ª–∏–¥–∞—Ü–∏—è –∞—Ñ–∏—à - –î–û–ë–ê–í–õ–ï–ù–û ‚úÖ
- **–ü—Ä–æ–±–ª–µ–º–∞**: –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞—Ñ–∏—à
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: 
  - –î–æ–±–∞–≤–∏–ª —Ñ—É–Ω–∫—Ü–∏–∏ `is_valid_url()` –∏ `is_valid_caption()`
  - –î–æ–±–∞–≤–∏–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ `admin:confirm_poster`
  - –ú–∞–∫—Å–∏–º—É–º 1024 —Å–∏–º–≤–æ–ª–∞ –¥–ª—è –ø–æ–¥–ø–∏—Å–∏
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ URL –¥–ª—è –±–∏–ª–µ—Ç–æ–≤ (https://)

### 7. VK –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è - –ò–°–ü–†–ê–í–õ–ï–ù–û ‚úÖ
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ VK –≥—Ä—É–ø–ø—É
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –ò—Å–ø—Ä–∞–≤–∏–ª —Ñ–æ—Ä–º–∞—Ç —Å—Å—ã–ª–æ–∫ —Å `vk.com/{ID}` –Ω–∞ `vk.com/club{ID}`

### 8. –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ - –ò–°–ü–†–ê–í–õ–ï–ù–û ‚úÖ
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏–∑-–∑–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –£–¥–∞–ª–∏–ª –≤–µ—Å—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –ø–æ—Å–ª–µ –±–ª–æ–∫–∞ `except` –≤ `handle_buttons`

## üîß **–¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**

### **–û—à–∏–±–∫–∏ –æ—Ç—Å—Ç—É–ø–æ–≤ –≤ –∫–æ–¥–µ**
```
IndentationError: unindent does not match any outer indentation level
```

**–ü—Ä–∏—á–∏–Ω–∞**: –ü—Ä–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ VK —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –Ω–∞—Ä—É—à–∏–ª–∞—Å—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç—Å—Ç—É–ø–æ–≤ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `handle_text`

## üîß **–ß—Ç–æ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å:**

### **–í–∞—Ä–∏–∞–Ω—Ç 1: –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**
1. –û—Ç–∫—Ä—ã—Ç—å `bot.py` –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
2. –ù–∞–π—Ç–∏ —Ñ—É–Ω–∫—Ü–∏—é `handle_text` (—Å—Ç—Ä–æ–∫–∞ ~1239)
3. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—Å—Ç—É–ø—ã –≤–æ –≤—Å–µ—Ö –±–ª–æ–∫–∞—Ö –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏
4. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å–µ `if/elif/else` –∏–º–µ—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã

### **–í–∞—Ä–∏–∞–Ω—Ç 2: –û—Ç–∫–∞—Ç –∫ —Ä–∞–±–æ—á–µ–π –≤–µ—Ä—Å–∏–∏**
1. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é —Ä–∞–±–æ—á—É—é –≤–µ—Ä—Å–∏—é `bot.py`
2. –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ VK –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ .env
3. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å VK —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

## üìã **VK —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ:**

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ (.env):**
```env
VK_TOKEN=vk1.a.2l5rCHb6DssxgM7NNl3s5EgsUn_zYHKwAvWD4WKMuEziPKUeCI24Z5QAWvnBSNM092MhGGmyZ5RMTiQEjwCdhnhmuSDgYl7QIK8aeaK686IIc5gexB0DSmkQO-0JoOsvxvjHU-_c10D4SAQN-42KUk2TF_jOypcBxfUeSbr0bFAEoq-UV5BLqpabgFUZjEn3IABJgt3aYvKG6qFvWpFlZA
VK_GROUP_DOMAIN=232772029
```

### **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "üîó –ü—Ä–∏–≤—è–∑–∞—Ç—å VK –ø—Ä–æ—Ñ–∏–ª—å"
2. –í–≤–æ–¥–∏—Ç —Å–≤–æ–π VK ID (—Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã): `825042510`
3. –ë–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –≥—Ä—É–ø–ø—É `232772029`
4. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –ø–æ–¥–ø–∏—Å–∞–Ω / ‚ùå –Ω–µ –ø–æ–¥–ø–∏—Å–∞–Ω / ‚ùì –Ω–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫:**
- **Telegram**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–Ω–∞–ª–∞ @largentmsk
- **VK**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä—É–ø–ø—ã vk.com/club232772029
- **–°—Ç–∞—Ç—É—Å—ã**: —á–µ—Ç–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫–Ω–æ–ø–∫–∞–º–∏ –¥–µ–π—Å—Ç–≤–∏–π

## üéØ **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç—Å—Ç—É–ø–æ–≤ –±–æ—Ç –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤!**

–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ë–î
- VK –ø—Ä–∏–≤—è–∑–∫–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏
- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Å Excel —ç–∫—Å–ø–æ—Ä—Ç–æ–º
- –ê—Ñ–∏—à–∏ —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã /menu

**VK API —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –∑–∞–ø—Ä–æ—Å–∞–º–∏ –∫ —Å–µ—Ä–≤–µ—Ä—É –í–ö–æ–Ω—Ç–∞–∫—Ç–µ.

---

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è - 21.09.2025

## ‚úÖ –ù–æ–≤—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

### 9. VK ID/–ù–∏–∫–Ω–µ–π–º –ø–æ–¥–¥–µ—Ä–∂–∫–∞ - –ò–°–ü–†–ê–í–õ–ï–ù–û ‚úÖ
- **–ü—Ä–æ–±–ª–µ–º–∞**: VK ID –ø—Ä–∏–Ω–∏–º–∞–ª —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã, –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª –Ω–∏–∫–Ω–µ–π–º—ã
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: 
  - –û–±–Ω–æ–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ñ–æ—Ä–º–∞—Ç–æ–≤:
    - **–¶–∏—Ñ—Ä—ã:** `123456789`
    - **ID:** `id123456789` 
    - **–ù–∏–∫–Ω–µ–π–º:** `durov`, `ivan_petrov`
  - –û–±–Ω–æ–≤–ª–µ–Ω —Ç–µ–∫—Å—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ –∫–Ω–æ–ø–∫–µ "–ü—Ä–∏–≤—è–∑–∞—Ç—å VK –ø—Ä–æ—Ñ–∏–ª—å"

### 10. –û—Ç–ø–∏—Å–∫–∞ –æ—Ç VK - –ò–°–ü–†–ê–í–õ–ï–ù–û ‚úÖ
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏ –æ—Ç–ø–∏—Å–∫–µ –æ—Ç VK –≥—Ä—É–ø–ø—ã —Å—Ç–∞—Ç—É—Å –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: 
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤ –∫–Ω–æ–ø–∫–µ "–ü–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä–∏—Ç—å"
  - –¢–µ–ø–µ—Ä—å —á–µ—Ç–∫–æ —Ä–∞–∑–ª–∏—á–∞—é—Ç—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏—è:
    - ‚úÖ - –ø–æ–¥–ø–∏—Å–∞–Ω
    - ‚ùå - –Ω–µ –ø–æ–¥–ø–∏—Å–∞–Ω (–≤–∫–ª—é—á–∞—è –æ—Ç–ø–∏—Å–∞–≤—à–∏—Ö—Å—è)
    - ‚ùì - –Ω–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å
    - ‚ö†Ô∏è - –ø—Ä–æ—Ñ–∏–ª—å –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π:

1. **VK –Ω–∏–∫–Ω–µ–π–º—ã**:
   - –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–∏–≤—è–∑–∞—Ç—å VK —á–µ—Ä–µ–∑ –Ω–∏–∫–Ω–µ–π–º (–Ω–∞–ø—Ä–∏–º–µ—Ä: `durov`)
   - –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —á–µ—Ä–µ–∑ ID (–Ω–∞–ø—Ä–∏–º–µ—Ä: `id123456789`)
   - –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —á–µ—Ä–µ–∑ —Ü–∏—Ñ—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä: `123456789`)

2. **–û—Ç–ø–∏—Å–∫–∞ –æ—Ç VK**:
   - –ü—Ä–∏–≤—è–∂–∏—Ç–µ VK –ø—Ä–æ—Ñ–∏–ª—å
   - –û—Ç–ø–∏—à–∏—Ç–µ—Å—å –æ—Ç VK –≥—Ä—É–ø–ø—ã
   - –ù–∞–∂–º–∏—Ç–µ "üîÑ –ü–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä–∏—Ç—å" - –¥–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å ‚ùå –∏ "–Ω–µ –ø–æ–¥–ø–∏—Å–∞–Ω"

### –ó–∞–ø—É—Å–∫:
```bash
python bot.py
```

–í—Å–µ –∫–Ω–æ–ø–∫–∏, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –ø—Ä–∏–≤—è–∑–∫–∞ VK (–≤–∫–ª—é—á–∞—è –Ω–∏–∫–Ω–µ–π–º—ã) –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫ (–≤–∫–ª—é—á–∞—è –æ—Ç–ø–∏—Å–∫—É) —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.
