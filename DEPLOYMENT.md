# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é TusaBot –Ω–∞ Ubuntu —Å–µ—Ä–≤–µ—Ä

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞](#1-–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-—Å–µ—Ä–≤–µ—Ä–∞)
2. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL](#2-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-postgresql)
3. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ](#3-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–ø—Ä–æ–µ–∫—Ç–∞-–Ω–∞-—Å–µ—Ä–≤–µ—Ä–µ)
4. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ systemd](#4-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-systemd)
5. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub](#5-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-github)
6. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Actions](#6-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-github-actions)
7. [–ü–µ—Ä–≤—ã–π –¥–µ–ø–ª–æ–π](#7-–ø–µ—Ä–≤—ã–π-–¥–µ–ø–ª–æ–π)
8. [–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã](#8-–ø—Ä–æ–≤–µ—Ä–∫–∞-—Ä–∞–±–æ—Ç—ã)

---

## 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

### 1.1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
```bash
ssh root@5.129.243.22
```

### 1.2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
```bash
apt update && apt upgrade -y
```

### 1.3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
```bash
apt install -y python3 python3-pip python3-venv git postgresql postgresql-contrib nginx ufw
```

### 1.4. –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –±–æ—Ç–∞
```bash
# –°–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è tusabot
useradd -m -s /bin/bash tusabot

# –î–æ–±–∞–≤–ª—è–µ–º –≤ sudo –≥—Ä—É–ø–ø—É (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
usermod -aG sudo tusabot

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–∞—Ä–æ–ª—å
passwd tusabot(–ø–∞—Ä–æ–ª—å 123qwertq)
```

### 1.5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ firewall
```bash
# –†–∞–∑—Ä–µ—à–∞–µ–º SSH, HTTP, HTTPS
ufw allow 22/tcp
ufw allow 80/tcp
ufw allow 443/tcp

# –í–∫–ª—é—á–∞–µ–º firewall
ufw --force enable
ufw status
```

---

## 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL

### 2.1. –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```bash
# –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è postgres
sudo -u postgres psql

# –í –∫–æ–Ω—Å–æ–ª–∏ PostgreSQL –≤—ã–ø–æ–ª–Ω—è–µ–º:
CREATE DATABASE largent WITH ENCODING 'UTF8';
CREATE USER tusabot_user WITH PASSWORD 'your_secure_password_here';
GRANT ALL PRIVILEGES ON DATABASE largent TO tusabot_user;
ALTER DATABASE largent OWNER TO tusabot_user;
\q
```

### 2.2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î
```bash
# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º pg_hba.conf
nano /etc/postgresql/*/main/pg_hba.conf

# –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç—Ä–æ–∫—É (–ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫ —Å postgres):
# local   all             tusabot_user                            md5

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º PostgreSQL
systemctl restart postgresql
```

### 2.3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```bash
psql -U tusabot_user -d largent -h 127.0.0.1
# –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å
# –ï—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ - –≤—ã—Ö–æ–¥–∏–º: \q
```

---

## 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### 3.1. –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
```bash
# –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
mkdir -p /opt/tusabot
chown tusabot:tusabot /opt/tusabot

# –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è tusabot
su - tusabot
cd /opt/tusabot
```

### 3.2. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
# –ó–∞–º–µ–Ω–∏—Ç–µ YOUR_USERNAME –Ω–∞ –≤–∞—à GitHub username
git clone https://github.com/YOUR_USERNAME/TusaBot.git .

# –ò–ª–∏ –µ—Å–ª–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Personal Access Token:
# git clone https://YOUR_TOKEN@github.com/YOUR_USERNAME/TusaBot.git .
```

### 3.3. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
python3 -m venv venv
source venv/bin/activate
pip install --upgrade pip
pip install -r requirements.txt
```

### 3.4. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ .env
```bash
nano .env
```

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ .env:**
```env
BOT_TOKEN=your_real_bot_token_here
ADMIN_USER_ID=your_telegram_id

DB_HOST=127.0.0.1
DB_PORT=5432
DB_NAME=largent
DB_USER=tusabot_user
DB_PASSWORD=your_secure_password_here

CHANNEL_USERNAME=@largentmsk
CHANNEL_USERNAME_2=@idnrecords

VK_ENABLED=True
VK_GROUP_DOMAIN=largent.tusa
VK_TOKEN=your_vk_token_here

WEEKLY_DAY=4
WEEKLY_HOUR_LOCAL=10
WEEKLY_MINUTE=0
```

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ:** Ctrl+O, Enter, Ctrl+X

### 3.5. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î
```bash
# –î–µ–ª–∞–µ–º —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x migrations/migrate.sh

# –ü—Ä–∏–º–µ–Ω—è–µ–º –º–∏–≥—Ä–∞—Ü–∏–∏
bash migrations/migrate.sh
```

### 3.6. –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –ª–æ–≥–æ–≤
```bash
# –í—ã—Ö–æ–¥–∏–º –∏–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è tusabot
exit

# –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –ª–æ–≥–æ–≤
mkdir -p /var/log/tusabot
chown tusabot:tusabot /var/log/tusabot
```

---

## 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ systemd

### 4.1. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ service —Ñ–∞–π–ª–∞
```bash
cp /opt/tusabot/tusabot.service /etc/systemd/system/
```

### 4.2. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ systemd –∏ –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞
```bash
# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é systemd
systemctl daemon-reload

# –í–∫–ª—é—á–∞–µ–º –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
systemctl enable tusabot

# –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞
systemctl start tusabot

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
systemctl status tusabot 
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
```

### 4.3. –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
journalctl -u tusabot -f

# –ò–ª–∏ –∏–∑ —Ñ–∞–π–ª–∞
tail -f /var/log/tusabot/bot.log

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞
systemctl restart tusabot

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞
systemctl stop tusabot
```

---

## 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub

### 5.1. –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://github.com
2. –ù–∞–∂–º–∏—Ç–µ "New repository"
3. –ù–∞–∑–≤–∞–Ω–∏–µ: `TusaBot`
4. –í—ã–±–µ—Ä–∏—Ç–µ Private (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω –ø—Ä–∏–≤–∞—Ç–Ω—ã–π)
5. –ù–ï –¥–æ–±–∞–≤–ª—è–π—Ç–µ README, .gitignore, license (–æ–Ω–∏ —É–∂–µ –µ—Å—Ç—å)
6. –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

### 5.2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Git –ª–æ–∫–∞–ª—å–Ω–æ
–ù–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ (Windows):
```powershell
cd C:\Users\Sasha\Desktop\TusaBot

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º git (–µ—Å–ª–∏ –µ—â–µ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω)
git init

# –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ —Ñ–∞–π–ª—ã
git add .

# –î–µ–ª–∞–µ–º –ø–µ—Ä–≤—ã–π –∫–æ–º–º–∏—Ç
git commit -m "Initial commit"

# –î–æ–±–∞–≤–ª—è–µ–º —É–¥–∞–ª–µ–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–∑–∞–º–µ–Ω–∏—Ç–µ YOUR_USERNAME)
git remote add origin https://github.com/YOUR_USERNAME/TusaBot.git

# –ü—É—à–∏–º –∫–æ–¥
git branch -M main
git push -u origin main
```

---

## 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Actions

### 6.1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SSH –∫–ª—é—á–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø–æ–¥ root
ssh-keygen -t ed25519 -C "github-actions-tusabot" -f /root/.ssh/tusabot_deploy

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –≤ authorized_keys –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è tusabot
cat /root/.ssh/tusabot_deploy.pub >> /home/tusabot/.ssh/authorized_keys
chmod 600 /home/tusabot/.ssh/authorized_keys
chown tusabot:tusabot /home/tusabot/.ssh/authorized_keys

# –í—ã–≤–æ–¥–∏–º –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á (—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é)
cat /root/.ssh/tusabot_deploy
```

### 6.2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Secrets
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub
2. Settings ‚Üí Secrets and variables ‚Üí Actions
3. –ù–∞–∂–º–∏—Ç–µ "New repository secret"

–°–æ–∑–¥–∞–π—Ç–µ 3 —Å–µ–∫—Ä–µ—Ç–∞:

**SECRET 1: SERVER_HOST**
- Name: `SERVER_HOST`
- Value: `5.129.243.22`

**SECRET 2: SERVER_USER**
- Name: `SERVER_USER`
- Value: `tusabot`

**SECRET 3: SSH_PRIVATE_KEY**
- Name: `SSH_PRIVATE_KEY`
- Value: *–í—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `/root/.ssh/tusabot_deploy` (–ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á)*

### 6.3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Git –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–ª—è –¥–µ–ø–ª–æ—è
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º tusabot
su - tusabot
cd /opt/tusabot

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º Git
git config --global user.email "bot@tusabot.local"
git config --global user.name "TusaBot Deploy"

# –î–µ–ª–∞–µ–º —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x deploy.sh

# –î–æ–±–∞–≤–ª—è–µ–º tusabot –≤ sudoers –¥–ª—è systemctl
exit  # –í—ã—Ö–æ–¥–∏–º –∏–∑ tusabot

# –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–∞–≤–∞ –¥–ª—è tusabot —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–≤–æ–∏–º —Å–µ—Ä–≤–∏—Å–æ–º
visudo

# –î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞:
# tusabot ALL=(ALL) NOPASSWD: /bin/systemctl start tusabot, /bin/systemctl stop tusabot, /bin/systemctl restart tusabot, /bin/systemctl status tusabot
```

---

## 7. –ü–µ—Ä–≤—ã–π –¥–µ–ø–ª–æ–π

### 7.1. –¢–µ—Å—Ç–æ–≤—ã–π –∫–æ–º–º–∏—Ç
–ù–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ:
```powershell
cd C:\Users\Sasha\Desktop\TusaBot

# –î–µ–ª–∞–µ–º –Ω–µ–±–æ–ª—å—à–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ
echo "# TusaBot - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –Ω–∞—Å—Ç—Ä–æ–µ–Ω!" >> README.md

# –ö–æ–º–º–∏—Ç–∏–º –∏ –ø—É—à–∏–º
git add .
git commit -m "Test automatic deployment"
git push origin main
```

### 7.2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–ø–ª–æ—è
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ GitHub –≤ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –í–∫–ª–∞–¥–∫–∞ "Actions"
3. –í—ã —É–≤–∏–¥–∏—Ç–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã–π workflow "Deploy TusaBot to Server"
4. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (–∑–µ–ª–µ–Ω–∞—è –≥–∞–ª–æ—á–∫–∞ ‚úÖ)

### 7.3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
```bash
ssh root@5.129.243.22
systemctl status tusabot
journalctl -u tusabot -n 50
```

---

## 8. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 8.1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–æ—Ç–∞ –≤ Telegram
1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
2. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

### 8.2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î
```bash
ssh root@5.129.243.22
sudo -u postgres psql -d largent

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∞–±–ª–∏—Ü—ã
\dt

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
SELECT * FROM users;

# –í—ã—Ö–æ–¥
\q
```

### 8.3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤
```bash
# –õ–æ–≥–∏ –±–æ—Ç–∞
tail -f /var/log/tusabot/bot.log

# –°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏
journalctl -u tusabot -f

# –û—à–∏–±–∫–∏
tail -f /var/log/tusabot/error.log
```

---

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–æ—Ç–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ:

```powershell
# –ù–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ
cd C:\Users\Sasha\Desktop\TusaBot

# –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥
# ...

# –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏ –∑–∞–ø—É—à—å—Ç–µ
git add .
git commit -m "–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
git push origin main
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:**
1. ‚úÖ GitHub Actions –∑–∞–ø—É—Å—Ç–∏—Ç workflow
2. ‚úÖ –ü–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ SSH
3. ‚úÖ –û—Å—Ç–∞–Ω–æ–≤–∏—Ç –±–æ—Ç–∞
4. ‚úÖ –°–∫–∞—á–∞–µ—Ç –Ω–æ–≤—ã–π –∫–æ–¥
5. ‚úÖ –û–±–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
6. ‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
7. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç –±–æ—Ç–∞

**–í–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–Ω–∏–º–∞–µ—Ç ~30-60 —Å–µ–∫—É–Ω–¥!**

---

## üÜò Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: GitHub Actions –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –ø–æ SSH
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSH –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh tusabot@5.129.243.22

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞
ls -la /home/tusabot/.ssh/
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
journalctl -u tusabot -n 100

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env —Ñ–∞–π–ª
cat /opt/tusabot/.env

# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é
su - tusabot
cd /opt/tusabot
source venv/bin/activate
python bot.py
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
psql -U tusabot_user -d largent -h 127.0.0.1

# –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—Ä—É—á–Ω—É—é
su - tusabot
cd /opt/tusabot
bash migrations/migrate.sh
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–ª—è systemctl
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ sudoers
sudo visudo

# –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∞:
# tusabot ALL=(ALL) NOPASSWD: /bin/systemctl start tusabot, /bin/systemctl stop tusabot, /bin/systemctl restart tusabot, /bin/systemctl status tusabot
```

---

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –º–∏–≥—Ä–∞—Ü–∏–π

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π:

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –≤ `migrations/`:
```bash
# –õ–æ–∫–∞–ª—å–Ω–æ
nano migrations/002_add_new_feature.sql
```

2. –ù–∞–ø–∏—à–∏—Ç–µ SQL:
```sql
-- migrations/002_add_new_feature.sql
ALTER TABLE users ADD COLUMN new_field TEXT;
```

3. –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏ –∑–∞–ø—É—à—å—Ç–µ:
```powershell
git add migrations/002_add_new_feature.sql
git commit -m "Add new field to users table"
git push origin main
```

4. –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ!

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–í–∞—à –±–æ—Ç —Ç–µ–ø–µ—Ä—å:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ø–ª–æ–∏—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º push
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ systemd —Å–µ—Ä–≤–∏—Å
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏
- ‚úÖ –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –≤ `/var/log/tusabot/`
- ‚úÖ –ü—Ä–∏–º–µ–Ω—è–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–£–¥–∞—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è! üöÄ**
